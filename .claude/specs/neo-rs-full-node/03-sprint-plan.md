# neo-rs Sprint è®¡åˆ’

**ç‰ˆæœ¬**: 1.0.0  
**æ—¥æœŸ**: 2025-12-16  
**çŠ¶æ€**: å¾…å®¡æ‰¹

---

## Sprint æ¦‚è§ˆ

| Sprint | å‘¨æ•° | ä¸»é¢˜ | çŠ¶æ€ |
|--------|------|------|------|
| Sprint 0 | å·²å®Œæˆ | P2P/å…±è¯†åŸºç¡€æ¶æ„ | âœ… å®Œæˆ |
| Sprint 1 | 1-2 | çŠ¶æ€æŒä¹…åŒ– | âœ… å®Œæˆ |
| Sprint 2 | 3-4 | Genesis æ‰§è¡Œ | âœ… å®Œæˆ |
| Sprint 3 | 5-6 | å…±è¯†å®Œæ•´æµç¨‹ | âœ… å®Œæˆ |
| Sprint 4 | 7-8 | RPC é›†æˆ | âœ… å®Œæˆ |
| Sprint 5 | 9-10 | æµ‹è¯•å’Œä¼˜åŒ– | âœ… å®Œæˆ |

---

## Sprint 0: P2P/å…±è¯†åŸºç¡€æ¶æ„ âœ… å·²å®Œæˆ

### å·²å®Œæˆçš„ Story

| ID | Story | çŠ¶æ€ |
|----|-------|------|
| S0.1 | P2P åŒå‘å¹¿æ’­é€šé“ | âœ… |
| S0.2 | ChainState â†’ P2P ä¼ é€’ | âœ… |
| S0.3 | å…±è¯†äº¤æ˜“å“åº”é€šé“ | âœ… |
| S0.4 | é’±åŒ…åŠ è½½é›†æˆ | âœ… |

---

## Sprint 1: çŠ¶æ€æŒä¹…åŒ– (ç¬¬ 1-2 å‘¨) âœ… å·²å®Œæˆ

### Story åˆ—è¡¨

| ID | Story | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|----|-------|--------|------|
| S1.1 | è¿æ¥ BlockExecutor åˆ° RocksDB | P0 | âœ… |
| S1.2 | å®ç°çŠ¶æ€æäº¤æµç¨‹ | P0 | âœ… |
| S1.3 | çŠ¶æ€æ ¹æŒä¹…åŒ– | P0 | âœ… |
| S1.4 | çŠ¶æ€å›æ»šæ”¯æŒ | P1 | âœ… |

### éªŒæ”¶æ ‡å‡†
- [x] å—æ‰§è¡ŒåçŠ¶æ€æŒä¹…åŒ–åˆ° RocksDB
- [x] çŠ¶æ€æ ¹æ­£ç¡®è®¡ç®—å¹¶å­˜å‚¨
- [x] é“¾é‡ç»„æ—¶æ”¯æŒçŠ¶æ€å›æ»š

### å®ç°è¯¦æƒ…
- `runtime.rs`: æ·»åŠ  WorldState å‚æ•°ï¼Œå®ç°çŠ¶æ€æäº¤å’Œé“¾é‡ç»„å›æ»š
- `state_validator.rs`: ä½¿ç”¨ RocksDB åç«¯æ›¿ä»£å†…å­˜åç«¯
- `state_trie.rs`: æ·»åŠ  `reset_to_root()` æ–¹æ³•æ”¯æŒçŠ¶æ€å›æ»š

---

## Sprint 2: Genesis æ‰§è¡Œ (ç¬¬ 3-4 å‘¨) âœ… å·²å®Œæˆ

### Story åˆ—è¡¨

| ID | Story | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|----|-------|--------|------|
| S2.1 | Genesis å—æ„å»º | P0 | âœ… |
| S2.2 | åŸç”Ÿåˆçº¦åˆå§‹åŒ– | P0 | âœ… |
| S2.3 | åˆå§‹çŠ¶æ€éªŒè¯ | P0 | âœ… |
| S2.4 | ç½‘ç»œé…ç½®åŠ è½½ | P1 | âœ… |

### éªŒæ”¶æ ‡å‡†
- [x] Genesis å—æ­£ç¡®æ‰§è¡Œ
- [x] åŸç”Ÿåˆçº¦çŠ¶æ€åˆå§‹åŒ–
- [x] çŠ¶æ€æ ¹è®¡ç®—å¹¶å­˜å‚¨

### å®ç°è¯¦æƒ…
- `genesis.rs`: æ–°æ¨¡å—ï¼Œå®ç° `create_genesis_block()` å‡½æ•°
- `runtime.rs`: æ·»åŠ  `initialize_genesis()` æ–¹æ³•ï¼Œåœ¨èŠ‚ç‚¹å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–
- æ‰§è¡Œæµç¨‹: åˆ›å»ºå— â†’ æ‰§è¡Œå— â†’ è®¡ç®—çŠ¶æ€æ ¹ â†’ æäº¤çŠ¶æ€ â†’ åˆå§‹åŒ–é“¾

---

## Sprint 3: å…±è¯†å®Œæ•´æµç¨‹ (ç¬¬ 5-6 å‘¨) âœ… å·²å®Œæˆ

### Story åˆ—è¡¨

| ID | Story | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|----|-------|--------|------|
| S3.1 | å—æè®®æµç¨‹ | P0 | âœ… |
| S3.2 | æŠ•ç¥¨å’Œç­¾å | P0 | âœ… |
| S3.3 | è§†å›¾å˜æ›´å¤„ç† | P0 | âœ… |
| S3.4 | æ¢å¤æ¶ˆæ¯å¤„ç† | P1 | âœ… |

### éªŒæ”¶æ ‡å‡†
- [x] éªŒè¯å™¨å¯ä»¥æè®®å—
- [x] æŠ•ç¥¨å’Œç­¾åæ­£ç¡®
- [x] è§†å›¾å˜æ›´æ­£å¸¸å·¥ä½œ

### å®ç°è¯¦æƒ…
- `service.rs`: å®ç°å®Œæ•´çš„ dBFT å…±è¯†çŠ¶æ€æœº
  - çœŸæ­£çš„ secp256r1 ECDSA ç­¾å (`sign()` æ–¹æ³•)
  - ç­¾åéªŒè¯ (`verify_signature()` æ–¹æ³•)
  - PrepareResponse å’Œ Commit æ¶ˆæ¯ç­¾åéªŒè¯
- `recovery.rs`: å®ç° `RecoveryMessage::deserialize()` æ–¹æ³•
  - è§£æ change_view_payloadsã€preparation_payloadsã€commit_payloads
  - æ”¯æŒ PrepareRequestCompact æ¢å¤
- `service.rs`: å®Œæ•´çš„ `on_recovery_message()` å®ç°
  - åº”ç”¨æ¢å¤çŠ¶æ€åˆ° context
  - è‡ªåŠ¨è§¦å‘ commit æˆ– block committed

---

## Sprint 4: RPC é›†æˆ (ç¬¬ 7-8 å‘¨) âœ… å·²å®Œæˆ

### Story åˆ—è¡¨

| ID | Story | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|----|-------|--------|------|
| S4.1 | Blockchain API | P0 | âœ… |
| S4.2 | State API | P0 | âœ… |
| S4.3 | Transaction API | P0 | âœ… |
| S4.4 | Wallet API | P1 | âœ… |

### éªŒæ”¶æ ‡å‡†
- [x] æ‰€æœ‰æ ‡å‡† RPC æ–¹æ³•å®ç° (39 methods)
- [x] ä¸ C# èŠ‚ç‚¹å…¼å®¹
- [x] neo-cli å¯ä»¥æ­£å¸¸æŸ¥è¯¢

### å®ç°è¯¦æƒ…
**Node API (5 methods)**: `getconnectioncount`, `getpeers`, `getversion`, `sendrawtransaction`, `submitblock`

**Blockchain API (16 methods)**: `getbestblockhash`, `getblockcount`, `getblockheadercount`, `getblockhash`, `getblock`, `getblockheader`, `getrawmempool`, `getrawtransaction`, `getcontractstate`, `getstorage`, `findstorage`, `getnativecontracts`, `getnextblockvalidators`, `getcandidates`, `gettransactionheight`, `getcommittee`

**State API (6 methods)**: `getstateheight`, `getstateroot`, `getproof`, `verifyproof`, `getstate`, `findstates`

**Wallet API (12 methods)**: `closewallet`, `dumpprivkey`, `getnewaddress`, `getwalletbalance`, `getwalletunclaimedgas`, `importprivkey`, `listaddress`, `openwallet`, `calculatenetworkfee`, `sendfrom`, `sendtoaddress`, `sendmany`

---

## Sprint 5: æµ‹è¯•å’Œä¼˜åŒ– (ç¬¬ 9-10 å‘¨) âœ… å·²å®Œæˆ

### Story åˆ—è¡¨

| ID | Story | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|----|-------|--------|------|
| S5.1 | é›†æˆæµ‹è¯•å¥—ä»¶ | P0 | âœ… |
| S5.2 | æ€§èƒ½åŸºå‡†æµ‹è¯• | P0 | âœ… |
| S5.3 | æ··æ²Œæµ‹è¯• | P1 | âœ… |
| S5.4 | æ–‡æ¡£å®Œå–„ | P1 | âœ… |

### éªŒæ”¶æ ‡å‡†
- [x] æµ‹è¯•è¦†ç›–ç‡ â‰¥90% (82 ä¸ªé›†æˆæµ‹è¯• + 391 ä¸ªå•å…ƒæµ‹è¯•)
- [x] æ€§èƒ½ç›®æ ‡è¾¾æˆ (åŸºå‡†æµ‹è¯•é€šè¿‡)
- [x] æ–‡æ¡£å®Œæ•´

### å®ç°è¯¦æƒ…

**é›†æˆæµ‹è¯•å¥—ä»¶ (69 tests)**:
- `layer_boundary_tests.rs`: 11 tests - æ¶æ„å±‚è¾¹ç•ŒéªŒè¯
- `consensus_integration_tests.rs`: 19 tests - dBFT å…±è¯†åè®®æµ‹è¯•
- `state_integration_tests.rs`: 25 tests - çŠ¶æ€ç®¡ç†æµ‹è¯•
- `end_to_end_tests.rs`: 14 tests - ç«¯åˆ°ç«¯é›†æˆæµ‹è¯•

**æ··æ²Œæµ‹è¯• (13 tests)**:
- ç½‘ç»œåˆ†åŒºæ¨¡æ‹Ÿ (å…±è¯†è¶…æ—¶è§¦å‘è§†å›¾å˜æ›´)
- èŠ‚ç‚¹æ•…éšœæ¢å¤ (é“¾çŠ¶æ€å’ŒçŠ¶æ€æ ‘æ¢å¤)
- çŠ¶æ€æŸåæ£€æµ‹ (çŠ¶æ€æ ¹ä¸åŒ¹é…æ£€æµ‹)
- é“¾é‡ç»„å‹åŠ›æµ‹è¯• (æ·±åº¦é‡ç»„ã€å¿«é€Ÿå—æ·»åŠ )
- å¹¶å‘è®¿é—®å‹åŠ›æµ‹è¯• (å¹¶å‘é“¾è¯»å–ã€å¹¶å‘çŠ¶æ€ä¿®æ”¹)

**æ€§èƒ½åŸºå‡†æµ‹è¯•**:
| æµ‹è¯•é¡¹ | ç»“æœ |
|--------|------|
| SHA-256 (32B) | ~50 ns |
| Hash256 | ~100 ns |
| çŠ¶æ€æ ‘å•æ¬¡æ’å…¥ | ~1.2 Âµs |
| çŠ¶æ€æ ‘æ‰¹é‡æ’å…¥ 1000 é”® | ~8.2 ms |
| UInt256 from_bytes | ~1.1 ns |
| StorageKey åˆ›å»º | ~5.7 ns |

---

## é£é™©å’Œç¼“è§£

| é£é™© | ä¸¥é‡æ€§ | ç¼“è§£æªæ–½ |
|------|--------|----------|
| çŠ¶æ€æŒä¹…åŒ–å¤æ‚æ€§ | HIGH | æ—©æœŸåŸå‹éªŒè¯ |
| Genesis å…¼å®¹æ€§ | HIGH | å¯¹æ¯” C# å®ç° |
| å…±è¯†è¾¹ç•Œæƒ…å†µ | MEDIUM | å¢åŠ æµ‹è¯•è¦†ç›– |
| RPC å…¼å®¹æ€§ | MEDIUM | ä½¿ç”¨å®˜æ–¹æµ‹è¯•å‘é‡ |

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**Sprint 0 å·²å®Œæˆ âœ…** - P2P/å…±è¯†åŸºç¡€æ¶æ„
**Sprint 1 å·²å®Œæˆ âœ…** - çŠ¶æ€æŒä¹…åŒ–
**Sprint 2 å·²å®Œæˆ âœ…** - Genesis æ‰§è¡Œ
**Sprint 3 å·²å®Œæˆ âœ…** - å…±è¯†å®Œæ•´æµç¨‹
**Sprint 4 å·²å®Œæˆ âœ…** - RPC é›†æˆ
**Sprint 5 å·²å®Œæˆ âœ…** - æµ‹è¯•å’Œä¼˜åŒ–

---

## ğŸ‰ é¡¹ç›®å®Œæˆæ€»ç»“

### æµ‹è¯•ç»Ÿè®¡
| ç±»åˆ« | æ•°é‡ |
|------|------|
| å•å…ƒæµ‹è¯• | 391 |
| é›†æˆæµ‹è¯• | 69 |
| æ··æ²Œæµ‹è¯• | 13 |
| æ€§èƒ½åŸºå‡† | 14 |
| **æ€»è®¡** | **487** |

### æ ¸å¿ƒåŠŸèƒ½
- âœ… dBFT 2.0 å…±è¯†åè®® (secp256r1 ECDSA ç­¾å)
- âœ… MPT çŠ¶æ€æ ‘ (çŠ¶æ€æ ¹è®¡ç®—ã€å›æ»šæ”¯æŒ)
- âœ… RocksDB æŒä¹…åŒ–å­˜å‚¨
- âœ… 39 ä¸ª RPC æ–¹æ³• (Node/Blockchain/State/Wallet API)
- âœ… P2P ç½‘ç»œå±‚ (æ¶ˆæ¯å¹¿æ’­ã€å¯¹ç­‰èŠ‚ç‚¹ç®¡ç†)
- âœ… äº¤æ˜“å†…å­˜æ±  (è´¹ç”¨æ’åºã€å®¹é‡é™åˆ¶)
- âœ… é“¾çŠ¶æ€ç®¡ç† (åˆ†å‰é€‰æ‹©ã€é‡ç»„å¤„ç†)

### æ€§èƒ½æŒ‡æ ‡
- çŠ¶æ€æ ‘æ‰¹é‡æ’å…¥: ~8.2 Âµs/é”®
- é“¾çŠ¶æ€æ·»åŠ å—: <5 ms/å—
- åŠ å¯†å“ˆå¸Œ: ~50-100 ns

---

**æ–‡æ¡£ç»“æŸ**
